function y = doFilter(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.4 and DSP System Toolbox 9.6.
% Generated on: 20-Sep-2019 12:32:57

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % FIR Window Bandpass filter designed using the FIR1 function.
    %
    % % All frequency values are in Hz.
    % Fs = 38000000;  % Sampling Frequency
    %
    % N    = 500;      % Order
    % Fc1  = 18000;    % First Cutoff Frequency
    % Fc2  = 22000;    % Second Cutoff Frequency
    % flag = 'scale';  % Sampling Flag
    % % Create the window vector for the design algorithm.
    % win = blackmanharris(N+1);
    %
    % % Calculate the coefficients using the FIR1 function.
    % b  = fir1(N, [Fc1 Fc2]/(Fs/2), 'bandpass', win, flag);
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [2.38218153052058e-07 2.47978505143106e-07 ...
        2.75712122801815e-07 3.21733395284496e-07 3.86440242163537e-07 ...
        4.70315543389778e-07 5.73928554518365e-07 6.97936306596932e-07 ...
        8.43084990106263e-07 1.01021132222913e-06 1.20024389661256e-06 ...
        1.41420451466449e-06 1.6532094973176e-06 1.91847097607092e-06 ...
        2.21129816199515e-06 2.533098591287e-06 2.88537934581586e-06 ...
        3.26974824700855e-06 3.68791502128857e-06 4.14169243517648e-06 ...
        4.63299739804307e-06 5.1638520303903e-06 5.73638469543089e-06 ...
        6.35283099162849e-06 7.01553470374876e-06 7.72694870988419e-06 ...
        8.48963584179923e-06 9.3062696958664e-06 1.01796353917602e-05 ...
        1.11126302759951e-05 1.2108264567317e-05 1.31696619408729e-05 ...
        1.43000600480192e-05 1.55028109685643e-05 1.67813815921758e-05 ...
        1.81393539256392e-05 1.95804253225996e-05 2.11084086323796e-05 ...
        2.27272322644385e-05 2.44409401650096e-05 2.62536917024222e-05 ...
        2.8169761457628e-05 3.01935389164181e-05 3.23295280598449e-05 ...
        3.45823468493641e-05 3.69567266032266e-05 3.94575112606949e-05 ...
        4.20896565306758e-05 4.48582289214214e-05 4.77684046479917e-05 ...
        5.08254684142424e-05 5.40348120661685e-05 5.74019331135125e-05 ...
        6.09324331166306e-05 6.46320159357185e-05 6.85064858395843e-05 ...
        7.25617454712854e-05 7.68037936680612e-05 8.12387231331213e-05 ...
        8.58727179569909e-05 9.07120509862645e-05 9.57630810377617e-05 ...
        0.000101032249956259 0.000106526079514125 0.000112251168151373 ...
        0.000118214187554836 0.000124421879075347 0.000130881049982015 ...
        0.000137598569552903 0.000144581365001601 0.000151836417239449 ...
        0.000159370756473331 0.000167191457639252 0.000175305635672106 ...
        0.000183720440612298 0.000192443052550132 0.000201480676409117 ...
        0.000210840536569604 0.000220529871334433 0.000230555927238505 ...
        0.000240925953204483 0.000251647194547085 0.000262726886828689 ...
        0.000274172249569254 0.000285990479813825 0.000298188745561166 ...
        0.000310774179057331 0.000323753869958254 0.000337134858365725 ...
        0.000350924127741374 0.000365128597703541 0.000379755116712227 ...
        0.000394810454647527 0.000410301295287224 0.000426234228689528 ...
        0.000442615743487112 0.000459452219098922 0.000476749917866448 ...
        0.000494514977121388 0.000512753401191865 0.000531471053354607 ...
        0.000550673647740692 0.000570366741202689 0.000590555725151244 ...
        0.000611245817369332 0.000632442053812608 0.000654149280404467 ...
        0.000676372144834581 0.000699115088369875 0.000722382337687029 ...
        0.000746177896735737 0.000770505538642112 0.000795368797661722 ...
        0.00082077096119186 0.000846715061852742 0.000873203869647459 ...
        0.000900239884210482 0.000927825327154714 0.000955962134527013 ...
        0.000984651949382231 0.00101389611448577 0.00104369566515476 ...
        0.0010740513222478 0.00110496348531339 0.00113643222590702 ...
        0.00116845728108681 0.00120103804709764 0.00123417357325358 ...
        0.00126786255602839 0.00130210333336362 0.00133689387920392 ...
        0.00137223179826887 0.00140811432107069 0.00144453829918676 ...
        0.00148150020079593 0.00151899610648745 0.00155702170535084 ...
        0.0015955722913552 0.00163464276002593 0.0016742276054268 ...
        0.0017143209174549 0.00175491637945579 0.00179600726616598 ...
        0.00183758644198946 0.00187964635961468 0.0019221790589782 ...
        0.00196517616658087 0.00200862889516186 0.0020525280437358 ...
        0.00209686399799787 0.00214162673110098 0.00218680580480942 ...
        0.00223239037103231 0.00227836917374032 0.0023247305512684 ...
        0.00237146243900695 0.00241855237248348 0.00246598749083631 ...
        0.00251375454068159 0.00256183988037414 0.00261022948466258 ...
        0.00265890894973854 0.00270786349867926 0.00275707798728261 ...
        0.00280653691029291 0.00285622440801563 0.00290612427331856 ...
        0.00295621995901634 0.0030064945856353 0.00305693094955447 ...
        0.00310751153151871 0.00315821850551904 0.00320903374803504 ...
        0.00325993884763372 0.00331091511491856 0.00336194359282245 ...
        0.00341300506723721 0.00346408007797255 0.00351514893003636 ...
        0.00356619170522819 0.00361718827403724 0.00366811830783555 ...
        0.00371896129135715 0.00376969653545292 0.00382030319011126 ...
        0.00387076025773356 0.00392104660665366 0.00397114098488979 ...
        0.0040210220341174 0.00407066830385067 0.00412005826582053 ...
        0.00416917032853634 0.00421798285201844 0.00426647416268821 ...
        0.00431462256840223 0.00436240637361686 0.00440980389466911 ...
        0.00445679347515982 0.00450335350142466 0.00454946241807835 ...
        0.00459509874361761 0.00464024108606769 0.00468486815865765 ...
        0.0047289587955092 0.00477249196732399 0.00481544679705396 ...
        0.00485780257553943 0.0048995387770995 0.00494063507505953 ...
        0.00498107135719999 0.00502082774111152 0.00505988458944066 ...
        0.00509822252501111 0.00513582244580491 0.00517266553978895 ...
        0.00520873329957101 0.00524400753687109 0.00527847039679269 ...
        0.00531210437187981 0.00534489231594484 0.00537681745765342 ...
        0.0054078634138519 0.00543801420262387 0.00546725425606195 ...
        0.00549556843274164 0.00552294202988424 0.005549360795196 ...
        0.00557481093837118 0.00559927914224688 0.00562275257359791 ...
        0.00564521889356029 0.00566666626767252 0.00568708337552368 ...
        0.00570645941999844 0.0057247841361091 0.00574204779940515 ...
        0.00575824123395147 0.0057733558198668 0.00578738350041419 ...
        0.00580031678863614 0.00581214877352706 0.0058228731257367 ...
        0.00583248410279828 0.00584097655387579 0.00584834592402533 ...
        0.005854588257966 0.00585970020335619 0.00586367901357181 ...
        0.00586652254998349 0.00586822928373029 0.0058687982969879 ...
        0.00586822928373029 0.00586652254998349 0.00586367901357181 ...
        0.00585970020335619 0.005854588257966 0.00584834592402533 ...
        0.00584097655387579 0.00583248410279828 0.0058228731257367 ...
        0.00581214877352706 0.00580031678863614 0.00578738350041419 ...
        0.0057733558198668 0.00575824123395147 0.00574204779940515 ...
        0.0057247841361091 0.00570645941999844 0.00568708337552368 ...
        0.00566666626767252 0.0056452188935603 0.00562275257359791 ...
        0.00559927914224688 0.00557481093837118 0.005549360795196 ...
        0.00552294202988424 0.00549556843274164 0.00546725425606195 ...
        0.00543801420262387 0.0054078634138519 0.00537681745765342 ...
        0.00534489231594484 0.00531210437187981 0.00527847039679269 ...
        0.00524400753687109 0.00520873329957101 0.00517266553978895 ...
        0.00513582244580491 0.00509822252501111 0.00505988458944066 ...
        0.00502082774111152 0.00498107135719999 0.00494063507505953 ...
        0.0048995387770995 0.00485780257553943 0.00481544679705396 ...
        0.00477249196732399 0.0047289587955092 0.00468486815865765 ...
        0.0046402410860677 0.00459509874361761 0.00454946241807835 ...
        0.00450335350142466 0.00445679347515983 0.00440980389466911 ...
        0.00436240637361686 0.00431462256840223 0.00426647416268821 ...
        0.00421798285201844 0.00416917032853634 0.00412005826582052 ...
        0.00407066830385067 0.0040210220341174 0.00397114098488979 ...
        0.00392104660665366 0.00387076025773356 0.00382030319011126 ...
        0.00376969653545292 0.00371896129135715 0.00366811830783555 ...
        0.00361718827403723 0.00356619170522819 0.00351514893003636 ...
        0.00346408007797256 0.00341300506723721 0.00336194359282245 ...
        0.00331091511491856 0.00325993884763372 0.00320903374803505 ...
        0.00315821850551904 0.00310751153151872 0.00305693094955447 ...
        0.00300649458563529 0.00295621995901634 0.00290612427331856 ...
        0.00285622440801563 0.00280653691029291 0.00275707798728262 ...
        0.00270786349867926 0.00265890894973854 0.00261022948466258 ...
        0.00256183988037414 0.00251375454068159 0.00246598749083631 ...
        0.00241855237248348 0.00237146243900695 0.00232473055126841 ...
        0.00227836917374032 0.00223239037103231 0.00218680580480942 ...
        0.00214162673110098 0.00209686399799787 0.00205252804373581 ...
        0.00200862889516186 0.00196517616658087 0.00192217905897821 ...
        0.00187964635961468 0.00183758644198946 0.00179600726616598 ...
        0.00175491637945579 0.0017143209174549 0.0016742276054268 ...
        0.00163464276002593 0.0015955722913552 0.00155702170535084 ...
        0.00151899610648745 0.00148150020079593 0.00144453829918676 ...
        0.00140811432107069 0.00137223179826887 0.00133689387920392 ...
        0.00130210333336362 0.00126786255602839 0.00123417357325358 ...
        0.00120103804709764 0.00116845728108681 0.00113643222590702 ...
        0.00110496348531339 0.0010740513222478 0.00104369566515476 ...
        0.00101389611448577 0.000984651949382231 0.000955962134527015 ...
        0.000927825327154715 0.000900239884210482 0.000873203869647459 ...
        0.000846715061852742 0.000820770961191859 0.000795368797661724 ...
        0.000770505538642111 0.000746177896735737 0.00072238233768703 ...
        0.000699115088369875 0.000676372144834581 0.000654149280404469 ...
        0.000632442053812608 0.000611245817369332 0.000590555725151245 ...
        0.000570366741202688 0.000550673647740692 0.000531471053354607 ...
        0.000512753401191865 0.000494514977121388 0.000476749917866449 ...
        0.000459452219098922 0.000442615743487113 0.000426234228689529 ...
        0.000410301295287223 0.000394810454647527 0.000379755116712228 ...
        0.000365128597703541 0.000350924127741374 0.000337134858365726 ...
        0.000323753869958253 0.000310774179057331 0.000298188745561166 ...
        0.000285990479813824 0.000274172249569254 0.000262726886828689 ...
        0.000251647194547085 0.000240925953204482 0.000230555927238505 ...
        0.000220529871334433 0.000210840536569604 0.000201480676409117 ...
        0.000192443052550132 0.000183720440612298 0.000175305635672106 ...
        0.000167191457639251 0.00015937075647333 0.000151836417239449 ...
        0.000144581365001601 0.000137598569552903 0.000130881049982016 ...
        0.000124421879075347 0.000118214187554836 0.000112251168151373 ...
        0.000106526079514125 0.000101032249956259 9.57630810377619e-05 ...
        9.07120509862642e-05 8.5872717956991e-05 8.12387231331213e-05 ...
        7.68037936680613e-05 7.25617454712854e-05 6.85064858395843e-05 ...
        6.46320159357185e-05 6.09324331166307e-05 5.74019331135126e-05 ...
        5.40348120661683e-05 5.08254684142424e-05 4.77684046479918e-05 ...
        4.48582289214215e-05 4.20896565306759e-05 3.9457511260695e-05 ...
        3.69567266032266e-05 3.4582346849364e-05 3.2329528059845e-05 ...
        3.01935389164182e-05 2.8169761457628e-05 2.62536917024221e-05 ...
        2.44409401650097e-05 2.27272322644386e-05 2.11084086323796e-05 ...
        1.95804253225996e-05 1.81393539256393e-05 1.67813815921754e-05 ...
        1.55028109685642e-05 1.43000600480194e-05 1.3169661940873e-05 ...
        1.21082645673171e-05 1.1112630275995e-05 1.01796353917603e-05 ...
        9.30626969586642e-06 8.48963584179924e-06 7.72694870988397e-06 ...
        7.01553470374863e-06 6.3528309916285e-06 5.73638469543092e-06 ...
        5.16385203039045e-06 4.63299739804314e-06 4.14169243517644e-06 ...
        3.68791502128849e-06 3.26974824700866e-06 2.88537934581572e-06 ...
        2.53309859128692e-06 2.21129816199491e-06 1.91847097607086e-06 ...
        1.65320949731762e-06 1.41420451466444e-06 1.20024389661271e-06 ...
        1.01021132222909e-06 8.43084990106256e-07 6.9793630659691e-07 ...
        5.73928554518379e-07 4.70315543389778e-07 3.86440242163551e-07 ...
        3.21733395284503e-07 2.75712122801829e-07 2.47978505143106e-07 ...
        2.38218153052058e-07]);
end

y = step(Hd,double(x));


% [EOF]
